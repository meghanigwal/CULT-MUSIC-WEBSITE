if(esMovil==false){points.innerHTML="Also try our <a style='color:#789;font-weight:bold;text-decoration:underline;' target='_blank' href='https://recursivearts.com/online-guitar/'>Online Guitar</a>"}if(navigator.requestMIDIAccess){function onMIDISuccess(e){for(var s of e.inputs.values())s.onmidimessage=getMIDIMessage}function getMIDIMessage(e){var s=e.data[0],o=e.data[1];e.data.length>2&&e.data[2];switch(s){case 144:o>23&&o<85&&gameInstance.SendMessage("CPU","PlayMidiNote",o-12),console.log("nota "+o);break;case 128:o>23&&o<85&&gameInstance.SendMessage("CPU","ReleaseMidiNote",o-12)}}function onMIDIFailure(){console.log("Could not access your MIDI devices.")}console.log("This browser supports WebMIDI!"),navigator.requestMIDIAccess().then(onMIDISuccess,onMIDIFailure)}else console.log("WebMIDI is not supported in this browser.");function postScoreFacebook(){FB.ui({method:"share",href:"https://recursivearts.com/virtual-piano/",quote:"I just scored "+totalScore+' points playing "'+songTitle+'" at https://recursivearts.com/virtual-piano/',display:"popup"},function(e){})}function TotalPoints(e,t){if(songTitle=t,e>=0)document.getElementById("points").style.fontFamily="Passion One, cursive",document.getElementById("points").style.fontSize="200%",document.getElementById("points").style.color="white",document.getElementById("points").style.textShadow="2px 2px 2px #999",totalScore=e,points.textContent=10>e?"Score: 00"+e:e>=10&&100>e?"Score: 0"+e:"Score: "+e;else if(-1==e)document.getElementById("points").style.fontFamily="Arial, Helvetica, sans-serif",document.getElementById("points").style.color="lightslategray",document.getElementById("points").style.fontSize="90%",points.textContent="";else{document.getElementById("points").style.fontFamily="Arial, Helvetica, sans-serif",document.getElementById("points").style.color="lightslategray",document.getElementById("points").style.fontSize="90%",points.textContent="",document.getElementById("myModal").style.display="block",finalPoints.textContent=totalScore,ready2ShareFacebook(),ready2ShareTwitter();var n=document.getElementById("myModal");document.getElementsByClassName("close")[0].onclick=function(){n.style.display="none",document.getElementById("#canvas").focus()},window.onclick=function(e){e.target==n&&(n.style.display="none",document.getElementById("#canvas").focus())}}}function ready2ShareFacebook(){document.getElementById("share-score-facebook").onclick=function(){document.getElementById("myModal").style.display="none",postScoreFacebook(),ga("send","event","VirtualPiano","FacebookShare","Summer Campaign")}}function ready2ShareTwitter(){document.getElementById("twitter-share-button").onclick=function(){return document.getElementById("twitter-share-button").href="https://twitter.com/intent/tweet?text=I just scored "+totalScore+' points playing "'+songTitle+'" at &via=RecursiveArts&hashtags=OnlinePiano&url=https://recursivearts.com/virtual-piano/ ',!1}}function Web2Piano(e){document.getElementById("#canvas").focus(),points.textContent="Score: 000",gameInstance.SendMessage("CPU","ResetPoints"),gameInstance.SendMessage("CPU","StartExtSong",e)}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}window.twttr=function(e,t,n){var o,a=e.getElementsByTagName(t)[0],s=window.twttr||{};return e.getElementById(n)?s:((o=e.createElement(t)).id=n,o.src="https://platform.twitter.com/widgets.js",a.parentNode.insertBefore(o,a),s._e=[],s.ready=function(e){s._e.push(e)},s)}(document,"script","twitter-wjs");var songTitle,totalScore=0;setTimeout(function(){points.textContent=""},8e3),twttr.events.bind("tweet",function(e){document.getElementById("myModal").style.display="none",ga("send","event","VirtualPiano","TwitterShare","Summer Campaign")});var down=!1;function ScrollPiano(e){e>0?$("html, body").animate({scrollTop:0},"50"):$("html, body").animate({scrollTop:680},"50")}document.addEventListener("keydown",function(e){if("Semicolon"==e.code){if(down)return;down=!0,gameInstance.SendMessage("A#5","EneExtPress","")}},!1),document.addEventListener("keyup",function(e){"Semicolon"==e.code&&(gameInstance.SendMessage("A#5","EneExtRelease",""),down=!1)}),document.getElementById("#canvas").focus(),$(document).keydown(function(e){var t=e.keyCode?e.keyCode:e.which;0!=t&&9!=t||(e.preventDefault(),e.stopPropagation())});var listacanciones=document.getElementById("listModal");function closeModal(){document.getElementById("recModal").style.display="none",document.getElementById("alertModal").style.display="none",document.getElementById("alertModal2").style.display="none",document.getElementById("alertModal3").style.display="none"}function closeModal2(){document.getElementById("alertModal4").style.display="none",gameInstance.SendMessage("CPU","desactivarPlay"),listacanciones.style.display="none"}function openModalAlert(){document.getElementById("mensaje").innerHTML="Please log in to start recording",document.getElementById("alertModal").style.display="block"}function openModalAlert2(){document.getElementById("mensaje").innerHTML="Please log in to access your recordings",document.getElementById("alertModal").style.display="block"}function openModalAlert3(){document.getElementById("mensaje2").innerHTML="You've reached the maximum number of recordings",document.getElementById("alertModal2").style.display="block"}function openModalAlert4(){document.getElementById("mensaje2").innerHTML="Please check your internet connection",document.getElementById("alertModal2").style.display="block"}function openModalAlert5(){document.getElementById("mensaje3").innerHTML="A friend sent you a song:",document.getElementById("alertModal3").style.display="block"}function openModalList(){showMySongs(),document.getElementById("listModal").style.display="block"}function PublishSong(e,t){songdata=e,duration=t,document.getElementById("recModal").style.display="block"}function insertData(){var e=$("#rec-title").val();$.ajax({type:"POST",url:"../../authentication/insert-data.php",data:{title:e,author:autor,songdata:songdata,duration:duration},dataType:"JSON",success:function(e){alert("Recording Saved!")},error:function(e){alert("Error saving recording.\nPlease check your internet connection.")}}),document.getElementById("recModal").style.display="none"}function playSong(e){listacanciones.style.display="none",gameInstance.SendMessage("CPU","PlayUserSong",JSON.stringify(e))}function playSharedSong(e){listacanciones.style.display="none",gameInstance.SendMessage("CPU","PlayUserSong",e)}function secondsTimeSpanToMS(e){e-=3600*Math.floor(e/3600);var t=Math.floor(e/60);return e-=60*t,(t<10?"0"+t:t)+":"+(e<10?"0"+e:e)}function showMySongs(){$.ajax({type:"POST",url:"../../authentication/mysongs.php",data:{author:autor},dataType:"JSON",success:function(e){$("#records_table tbody").empty();var t="";$.each(e,function(e,n){var o=n.songdata;o=o.replace(/"/g,"&quot;"),t+='<tr><td><span style="color:grey;">'+(e+1)+'</span></td><td><a  class="usersong" title="'+n.title+'" onclick="playSong('+o+')" href="javascript:void(0);">'+n.title+"</a></td><td><span>"+secondsTimeSpanToMS(n.duration)+'</span></td><td><img src="../../imagenes/songbin.png" title="Delete" style="height:15px; width:13px; cursor:pointer" onclick="deleteSong('+n.id+')" /></td><td><img src="../../imagenes/songshare.png" title="Share Link" style="height:15px; width:13px; cursor:pointer" onclick="shareSong('+n.id+","+n.duration+')" /></td></tr>'}),$("#records_table tbody").append(t)},error:function(e){alert("err")}})}function deleteSong(e){$.post("../../authentication/deletesong.php",{sid:e,author:autor},function(e){showMySongs()})}function shareSong(e,t){listacanciones.style.display="none",document.getElementById("mensaje4").innerHTML="https://recursivearts.com/virtual-piano/?rec="+e+"_"+t,document.getElementById("alertModal4").style.display="block"}function playfriendrec(){grabacion&&$.post("../../authentication/friendsong.php",{sid:recID,sduration:recDur},function(e){setTimeout(playSharedSong(e),1e3)})}window.onclick=function(e){e.target==listacanciones&&(gameInstance.SendMessage("CPU","desactivarPlay"),listacanciones.style.display="none")};